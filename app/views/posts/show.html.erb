<div class="container">
  <div class="row">

  <div class="col-sm-1"></div>
  <div class="col-sm-2">
    <div class="sidebar">
      <%= render partial: 'users/user_sidebar', locals: { user: @my_user, favorites: @myfavorites,  } %>
    </div>
  </div>

  <div class="col-sm-8 offset-sm-1">
    <h2>Post info</h2>
    <div class="posted">
      <div class="posted-user">
        <%= link_to user_path(@post.user) do %>
          <p>
            <%= attachment_image_tag @post.user.profile_image , :profile_image, format: 'jpeg', size: "40x40", fallback: "no_image.jpg", class:"mt-sm-2 rounded-circle"; %>
            <%= @post.user.name %>
            <% if @post.user == current_user %>
              <%= link_to post_path(@post), method: :delete, data: {confirm: "本当に消しますか？"} do %>
               <button class="btn btn-danger float-right mt-sm-3 mr-sm-2">投稿を削除する</button>
              <% end %>
            <% end %>
          </p>
        <% end %>
      </div>

      <div class="posted-body">
        <p class="mt-2 pl-sm-3"><%= @post.body %></p>
        <% @post.image.each do |img| %>
          <%= image_tag img.url ,class: 'sized-show' %>
        <% end %>
      </div>

      <div class="row">
        <div class="col-sm-2">
          <p class="pl-sm-3"><%= @post.created_at.strftime('%Y/%m/%d') %></p>
        </div>
        <div class="col-sm-2", id="favorite_<%= @post.id %>">
          <%= render partial: 'favorites/favorite', locals: { post: @post } %>
        </div>
        <div class="col-sm-2">
          <%= "コメント(#{@post.post_comments.count})" %></p>
        </div>
        <div class="col-sm-6">
          <p>タグ：<%= render 'posts/tag_list', tag_list: @post.tag_list %></p>
        </div>
      </div>
      
      <div class="row pl-sm-3">
        <div id="comments_area">
          <% if user_signed_in? %>
            <div class="pl-sm-3 mb-sm-3">
            <!-- コメント入力欄をブログの詳細ページに表示するためのrender -->
            <%= render partial: 'post_comments/form', locals: { post_comment: @post_comment, post: @post } %>
            </div>
          <% end %>
          <div class="pl-sm-3">
          <!-- 投稿されたコメント一覧をブログの詳細ページに表示するためのrender -->
            <%= render partial: 'post_comments/index', locals: { post_comments: @post_comments, user: current_user } %>
          </div>
        </div>
      </div>
      
    </div>
  </div>

</div>
</div>
